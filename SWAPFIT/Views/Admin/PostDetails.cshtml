@model SWAPFIT.Model.BaiVietDTO
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["Title"] = "Chi tiết bài viết";
}

<style>
    .admin-actionbar {
        position: sticky;
        bottom: 0;
        z-index: 50;
        background: rgba(255,255,255,.92);
        backdrop-filter: blur(10px);
        border-top: 1px solid #e9ecef;
        box-shadow: 0 -6px 18px rgba(0,0,0,.06);
        padding: 14px 0;
        margin-top: 18px;
    }

        .admin-actionbar .btn {
            border-radius: 999px;
            padding: 10px 18px;
            font-weight: 600;
            letter-spacing: .2px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

            .admin-actionbar .btn i {
                font-size: 1.1rem;
                line-height: 1;
            }

    .status-pill {
        border-radius: 999px;
        padding: 10px 14px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        border: 1px solid #e9ecef;
        background: #f8f9fa;
        color: #495057;
        white-space: nowrap;
    }
</style>

<div class="container mt-5">
    <h3 class="fw-bold text-success mb-4 text-center">📄 Chi tiết bài viết</h3>

    <div class="card shadow-sm p-4">
        <h4 class="fw-bold text-primary">@Model.TieuDe</h4>
        <p class="text-muted">Ngày đăng: @Model.NgayTao?.ToString("dd/MM/yyyy")</p>

        <p><strong>Người đăng:</strong> @Model.HoTen</p>
        <p><strong>Danh mục:</strong> @Model.TenDanhMuc</p>
        <p><strong>Loại bài:</strong> @Model.LoaiBaiDang</p>
        <p><strong>Giá:</strong> @((Model.GiaSanPham ?? 0).ToString("N0")) đ</p>
        <p><strong>Số lượng:</strong> @Model.SoLuong</p>
        <p><strong>Ngày tạo:</strong> @Model.NgayTao?.ToString("HH:mm dd/MM/yyyy")</p>

        <p>
            <strong>Trạng thái hiện tại:</strong>
            <span class="badge
                @(Model.TrangThai == "Chờ duyệt" ? "bg-warning text-dark" :
                                    Model.TrangThai == "Đang hiển thị" ? "bg-success" :
                                    Model.TrangThai == "Từ chối" ? "bg-danger" : "bg-secondary")">
                @Model.TrangThai
            </span>
        </p>

        <hr />

        <p><strong>Mô tả chi tiết:</strong></p>
        <p>@Model.NoiDung</p>

        @if (Model.HinhAnhs != null && Model.HinhAnhs.Any())
        {
            <div class="row g-3 mt-3">
                @foreach (var img in Model.HinhAnhs)
                {
                    <div class="col-md-3 col-4">
                        <img src="@(!string.IsNullOrEmpty(img) ? img : "/images/placeholder.png")"
                             class="img-fluid rounded shadow-sm" alt="Ảnh bài viết" />
                    </div>
                }
            </div>
        }
        else
        {
            <p class="text-muted mt-3">Bài viết chưa có hình ảnh.</p>
        }
    </div>
</div>
<div class="admin-actionbar">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-2">

            <div class="d-flex flex-wrap gap-2">
                @if (Model.TrangThai == "Chờ duyệt")
                {
                    <a asp-action="Duyet"
                       asp-route-id="@Model.MaBaiViet"
                       class="btn btn-success">
                        <i class="bi bi-check2-circle"></i>
                        Duyệt bài
                    </a>

                    <a asp-action="TuChoi"
                       asp-route-id="@Model.MaBaiViet"
                       class="btn btn-warning text-dark">
                        <i class="bi bi-x-circle"></i>
                        Từ chối
                    </a>
                }
                else
                {
                    <span class="status-pill">
                        <i class="bi bi-info-circle"></i>
                        Bài viết đã @Model.TrangThai.ToLower()
                    </span>
                }
            </div>

            <a asp-action="Dashboard" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i>
                Quay lại Dashboard
            </a>

        </div>
    </div>
</div>
