@model SWAPFIT.Models.BaiViet
@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["Title"] = "Quản lý bài viết";
}


<div class="container mt-4 mb-5">
    <h3 class="mb-3">Chi tiết bài đăng</h3>

    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h4 class="mb-3">@Model.TieuDe</h4>

            <p><strong>Người đăng:</strong> @Model.NguoiDung?.HoTen (@Model.NguoiDung?.TenDangNhap)</p>
            <p><strong>Danh mục:</strong> @Model.DanhMuc?.TenDanhMuc</p>
            <p><strong>Loại bài:</strong> @Model.LoaiBaiDang</p>
            <p><strong>Giá:</strong> @((Model.GiaSanPham ?? 0).ToString("N0")) đ</p>
            <p><strong>Số lượng:</strong> @Model.SoLuong</p>

            <p><strong>Ngày tạo:</strong> @Model.NgayTao?.ToString("HH:mm dd/MM/yyyy")</p>


            <p>
                <strong>Trạng thái hiện tại:</strong>
                <span class="badge
                    @(Model.TrangThai == "Chờ duyệt" ? "bg-warning text-dark" :
                                            Model.TrangThai == "Đang hiển thị" ? "bg-success" :
                                            Model.TrangThai == "Từ chối" ? "bg-danger" : "bg-secondary")">
                    @Model.TrangThai
                </span>
            </p

            <hr />

            <p><strong>Mô tả chi tiết:</strong></p>
            <p>@Model.NoiDung</p>

            @* Ảnh *@
            @if (Model.AnhBaiViets != null && Model.AnhBaiViets.Any())
            {
                <div class="row g-2 mt-3">
                    @foreach (var img in Model.AnhBaiViets)
                    {
                        <div class="col-md-3 col-4">
                            <img src="@img.DuongDan"
                                 class="img-fluid rounded border"
                                 alt="Ảnh bài viết" />
                        </div>
                    }
                </div>
            }
            else
            {
                <p class="text-muted mt-3">Bài viết chưa có hình ảnh.</p>
            }
        </div>
    </div>

    <!-- =======================
         Nút thao tác tùy trạng thái
         ======================= -->
    <div class="d-flex gap-2">

        @if (Model.TrangThai == "Chờ duyệt")
        {
            <a asp-action="Duyet"
               asp-route-id="@Model.MaBaiViet"
               class="btn btn-success">
                ✔ Duyệt bài
            </a>

            <a asp-action="TuChoi"
               asp-route-id="@Model.MaBaiViet"
               class="btn btn-warning">
                ✖ Từ chối 
            </a>

            @* <form asp-action="DeletePostAdmin"
                  asp-route-id="@Model.MaBaiViet"
                  method="post"
                  onsubmit="return confirm('Bạn có chắc chắn muốn xóa bài này không?');">
                <button type="submit" class="btn btn-danger">
                    🗑 Xóa
                </button>
            </form> *@
        }
        else
        {
            <span class="badge bg-info text-dark align-self-center">
                Bài viết đã @Model.TrangThai.ToLower()
            </span>
        }

        <a asp-action="Dashboard" class="btn btn-outline-secondary ms-auto">
            ← Quay lại Dashboard
        </a>
    </div>
</div>
