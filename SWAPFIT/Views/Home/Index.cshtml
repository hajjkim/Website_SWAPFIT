@{
    Layout = "_Layout";
}

<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
    /* ================== BANNER CAROUSEL ================== */
    #bannerCarousel {
        max-width: 1300px;
        margin: 0 auto;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        overflow: hidden; /* ẩn phần ảnh thừa */
    }

        #bannerCarousel .carousel-inner {
            border-radius: 16px;
        }

        #bannerCarousel .carousel-item {
            height: 420px; /* chiều cao chung cho mọi banner - chỉnh tùy ý */
            transition: opacity 1s ease-in-out; /* fade mượt */
        }

        #bannerCarousel .banner-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* cắt cho vừa khung nhưng giữ tỷ lệ */
            display: block;
            object-fit: cover; /* ảnh lấp đầy nhưng không méo */
            object-position: center; /* canh giữa ảnh */
        }

    /* ================== VOUCHER CARD ================== */
    .voucher-card {
        background-color: #a8e6cf; /* Voucher background color */
        color: white;
        width: 100%; /* Full width */
        max-width: 600px; /* Adjust to make it wider */
        height: 150px; /* Adjust height for horizontal layout */
        border-radius: 8px;
        padding: 15px;
        text-align: left; /* Align content to the left */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        display: flex; /* Use flexbox for horizontal layout */
        align-items: center;
        justify-content: space-between;
    }

    .voucher-logo {
        width: 60px; /* Larger size for horizontal layout */
        height: auto;
        margin-right: 20px; /* Space between logo and text */
    }

    .voucher-details {
        flex-grow: 1; /* Make the text section grow */
        text-align: left; /* Align text to the left */
    }

    .voucher-card h5 {
        font-size: 18px;
        margin-bottom: 5px;
    }

    .voucher-card p {
        font-size: 14px;
        margin-bottom: 5px;
    }

    .voucher-card .btn {
        background-color: #ffcc00; /* Button color */
        color: black;
        border: none;
        padding: 10px;
        font-size: 16px;
        border-radius: 4px;
        cursor: pointer;
    }

        .voucher-card .btn:hover {
            background-color: #e6b800;
        }
</style>

<!-- ================== BANNER CAROUSEL ================== -->
<section class="my-5">
    <div id="bannerCarousel"
         class="carousel slide carousel-fade"
         data-bs-ride="carousel"
         data-bs-interval="10000">

        <div class="carousel-inner text-center">
            <!-- Banner 1 -->
            <div class="carousel-item active">
                <img src="~/images/banner1.png" class="banner-img" alt="Banner 1" />
            </div>

            <!-- Banner 2 -->
            <div class="carousel-item">
                <img src="~/images/banner2.png" class="banner-img" alt="Banner 2" />
            </div>

            <!-- Banner 3 -->
            <div class="carousel-item">
                <img src="~/images/banner3.png" class="banner-img" alt="Banner 3" />
            </div>

            <!-- Banner 4 -->
            <div class="carousel-item">
                <img src="~/images/banner4.png" class="banner-img" alt="Banner 4" />
            </div>

            @* <!-- Banner 5 --> *@
            <div class="carousel-item">
                <img src="~/images/banner6.png" class="banner-img" alt="Banner 6" />
            </div>

            <!-- Banner 6 -->
            <div class="carousel-item">
                <img src="~/images/banner7.png" class="banner-img" alt="Banner 7" />
            </div>
        </div>

        <!-- Nút điều hướng trái/phải -->
        <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>

        <!-- Dots ở dưới -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="2"></button>
            <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="3"></button>
            <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="4"></button>
            <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="5"></button>
        </div>
    </div>
</section>

<!-- ================== THƯƠNG HIỆU HOT ================== -->
<section class="brands-section text-center my-5">
    <h2 class="fw-bold fs-2 mb-5">
        Thương hiệu <span class="text-warning">Hot tuần này</span>
    </h2>

    <div class="container">
        <div class="row justify-content-center gy-4 gx-5">
            <!-- UNIQLO -->
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="brand-card shadow-sm p-3 rounded-4">
                    <img src="~/images/uniqlo.jpg" alt="Uniqlo" class="brand-img rounded-4 mb-3" />
                    <div class="d-flex justify-content-center align-items-center mb-2">
                        <img src="~/images/uniqlo_logo1.jpg" alt="Uniqlo JP" class="brand-logo me-2" />
                        <img src="~/images/uniqlo_logo2.jpg" alt="Uniqlo EN" class="brand-logo" />
                    </div>
                    <p class="brand-text text-muted">Thời trang dành cho mọi người</p>
                </div>
            </div>

            <!-- H&M -->
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="brand-card shadow-sm p-3 rounded-4">
                    <img src="~/images/h&m_images.jpg" alt="H&M" class="brand-img rounded-4 mb-3" />
                    <img src="~/images/h&m_logo.jpg" alt="H&M Logo" class="brand-logo mb-2" />
                    <p class="brand-text text-muted">Hãy thay đổi phong cách thời trang</p>
                </div>
            </div>

            <!-- ZARA -->
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="brand-card shadow-sm p-3 rounded-4">
                    <img src="~/images/zara_images.jpg" alt="ZARA" class="brand-img rounded-4 mb-3" />
                    <img src="~/images/zara_logo.jpg" alt="ZARA Logo" class="brand-logo mb-2" />
                    <p class="brand-text text-muted">Thương hiệu thời trang quốc tế</p>
                </div>
            </div>

            <!-- ELISE -->
            <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="brand-card shadow-sm p-3 rounded-4">
                    <img src="~/images/elise_images.jpg" alt="ELISE" class="brand-img rounded-4 mb-3" />
                    <img src="~/images/elise_logo.png" alt="ELISE Logo" class="brand-logo mb-2" />
                    <p class="brand-text text-muted">Thương hiệu thời trang cao cấp</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ================== VOUCHER ================== -->
<section class="voucher-section my-5 py-5 bg-light">
    <div class="container">
        <h2 class="text-center fw-bold mb-4 display-5">Săn Voucher Giảm Giá</h2>
        <p class="text-center text-muted mb-5 lead">
            Nhanh tay lưu ngay các ưu đãi siêu hot từ SWAPFIT!
        </p>

        @if (ViewBag.ActiveVouchers != null && ((System.Collections.IEnumerable)ViewBag.ActiveVouchers).Cast<object>().Any())
        {
            <div class="row g-4 justify-content-center">
                @foreach (var voucher in ViewBag.ActiveVouchers)
                {
                    <div class="col-12 col-md-6 col-lg-4">
                        <div class="voucher-card d-flex align-items-center justify-content-between">
                            <!-- Logo + Nội dung -->
                            <div class="d-flex align-items-center flex-grow-1">
                                <div class="me-4">
                                    <img src="~/images/logo.png" alt="SWAPFIT" class="img-fluid rounded" style="width: 80px;" />
                                </div>
                                <div class="voucher-details">
                                    <h5>@voucher.TenUuDai</h5>
                                    <p class="mb-1">@voucher.MoTa</p>
                                    <small class="text-danger fw-bold">
                                        HSD: @Convert.ToDateTime(voucher.NgayKetThuc).ToString("dd/MM/yyyy")
                                    </small>
                                </div>
                            </div>

                            <!-- Nút lưu voucher -->
                            <button type="button"
                                    class="btn btn-warning text-dark fw-bold px-4 save-voucher-btn"
                                    data-voucher-id="@voucher.MaUuDai">
                                <i class="bi bi-bookmark"></i> Lưu voucher
                            </button>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="text-center py-5">
                <p class="text-muted fs-4">Hiện chưa có voucher nào đang hoạt động</p>
            </div>
        }
    </div>
</section>

<!-- ================== SWAPFIT BANNER PHỐI ĐỒ ================== -->
<section class="swapfit-banner my-5">
    <div class="container-fluid px-0">
        <div class="row align-items-center g-0">
            <!-- Phần chữ bên trái -->
            <div class="col-12 col-md-7 p-5 banner-text">
                <p class="text-muted mb-1">
                    <span class="text-success fw-bold">SWAPfit</span> mang đến cho bạn sự mới lạ qua từng phong cách
                </p>
                <h2 class="fw-bold mb-4">
                    Cùng <span class="text-success">SWAPfit</span> phối đồ cực chất
                </h2>
                <a href="/Pages/Phoido" class="btn btn-success fw-bold px-4 py-2 rounded-pill">
                    Thử ngay
                </a>
            </div>

            <!-- Phần hình ảnh bên phải -->
            <div class="col-12 col-md-5">
                <div class="banner-grid">
                    <img src="~/images/a1.jpg" alt="Look 1" />
                    <img src="~/images/a2.jpg" alt="Look 2" />
                    <img src="~/images/a3.jpg" alt="Look 3" />
                    <img src="~/images/a4.jpg" alt="Look 4" />
                    <img src="~/images/a5.jpg" alt="Look 5" />
                    <img src="~/images/a6.jpg" alt="Look 6" />
                    <img src="~/images/a7.jpg" alt="Look 7" />
                    <img src="~/images/a8.jpg" alt="Look 8" />
                    <img src="~/images/a9.jpg" alt="Look 9" />
                    <img src="~/images/a10.jpg" alt="Look 10" />
                    <img src="~/images/a11.jpg" alt="Look 11" />
                    <img src="~/images/a12.jpg" alt="Look 12" />
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ================== SẢN PHẨM + CHIẾN DỊCH XANH ================== -->
<section class="product-section">
    <h2>Hàng nghìn sản phẩm các loại</h2>

    <div class="green-campaign">
        <div class="green-img">
            <img src="~/images/banner2.png" alt="Phủ xanh Việt Nam" />
        </div>

        <div class="green-text">
            <h3>Tạo Tác động</h3>
            <h2>CHIẾN DỊCH PHỦ XANH VIỆT NAM</h2>
            <p>Chung tay vì một Việt Nam xanh - sạch - đẹp</p>
        </div>
    </div>
</section>

<!-- ================== HÃY CÙNG SWAPFIT ================== -->
<section class="swapfit-section">
    <h2>HÃY CÙNG SWAPFIT</h2>

    <div class="swapfit-cards">
        <div class="swapfit-card">
            <div class="icon-box">
                <img src="/images/gra1.png" alt="Gift Box">
            </div>
            <p>Đồ cũ không có nghĩa là phải bỏ đi</p>
        </div>

        <div class="swapfit-card">
            <div class="icon-box">
                <img src="/images/gra2.png" alt="Gift Box">
            </div>
            <p>Cũ người, mới ta</p>
        </div>

        <div class="swapfit-card">
            <div class="icon-box">
                <img src="/images/gra3.png" alt="Gift Box">
            </div>
            <p>Giảm lượng rác thải ra môi trường</p>
        </div>
    </div>
</section>

<script>
    $(document).ready(function () {
        $('.save-voucher-btn').on('click', function () {
            var btn = $(this);
            var voucherId = btn.data('voucher-id');

            // Ngăn bấm liên tục
            if (btn.prop('disabled')) return;

            btn.prop('disabled', true).html('<span class="spinner-border spinner-border-sm"></span> Đang lưu...');

            $.post('/UuDai/SaveVoucher', { voucherId: voucherId })
                .done(function (res) {
                    if (res.success) {
                        btn.removeClass('btn-warning').addClass('btn-success')
                           .html('Đã lưu').prop('disabled', true);
                        // Tùy chọn: hiện toast đẹp
                        alert(res.message);
                    } else {
                        alert(res.message);
                        btn.prop('disabled', false).html('Lưu voucher');
                    }
                })
                .fail(function () {
                    alert('Lỗi kết nối, vui lòng thử lại!');
                    btn.prop('disabled', false).html('Lưu voucher');
                });
        });
    });
</script>
